<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core">

    <div class="lista-container">
        <div class="lista-stats">
            <h:outputText value="Total de localizações: #{localizacaoController.localizacoesCount}" 
                          styleClass="stats-text" />
        </div>

        <div class="lista-content">
            <h:panelGroup rendered="#{empty localizacaoController.localizacoes}">
                <div class="empty-state">
                    <p>Nenhuma localização encontrada.</p>
                    <h:form>
                        <h:commandButton value="Adicionar primeira localização"
                                         action="#{localizacaoController.navigateToAdd}"
                                         styleClass="btn btn-primary" />
                    </h:form>
                </div>
            </h:panelGroup>

            <h:panelGroup rendered="#{not empty localizacaoController.localizacoes}">
                <div class="lista-grid">
                    <ui:repeat value="#{localizacaoController.localizacoes}" var="local">
                        <div class="item-card">
                            <div class="item-header">
                                <h3 class="item-title">#{local.nome}</h3>
                                <div class="item-actions">
                                    <h:form styleClass="inline-form">
                                        <h:commandButton value="Editar"
                                                         action="#{localizacaoController.navigateToEdit(local.id)}"
                                                         styleClass="btn btn-sm btn-outline" />
                                        
                                        <h:commandButton value="Excluir"
                                                         action="#{localizacaoController.delete(local.id)}"
                                                         onclick="return confirm('Tem certeza que deseja excluir esta localização?')"
                                                         styleClass="btn btn-sm btn-danger">
                                            <f:ajax execute="@form" render="lista-localizacoes" />
                                        </h:commandButton>
                                    </h:form>
                                </div>
                            </div>
                            
                            <div class="item-content">
                                <h:panelGroup rendered="#{not empty local.descricao}">
                                    <p class="item-description">#{local.descricao}</p>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{empty local.descricao}">
                                    <p class="item-description text-muted">Sem descrição</p>
                                </h:panelGroup>
                            </div>
                        </div>
                    </ui:repeat>
                </div>
            </h:panelGroup>
        </div>
    </div>

</ui:composition>